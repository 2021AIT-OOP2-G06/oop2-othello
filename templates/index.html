<html lang="ja">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../static/index.css">
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <title>オセロ</title>
</head>
<body>
  <table id='tbl1'>
    <tbody>
      <tr>
        <td class="none" id='a1'></td>
        <td class="none" id='a2'></td>
        <td class="none" id='a3'></td>
        <td class="none" id='a4'></td>
        <td class="none" id='a5'></td>
        <td class="none" id='a6'></td>
        <td class="none" id='a7'></td>
        <td class="none" id='a8'></td>
      </tr>
      <tr>
        <td class="none" id='b1'></td>
        <td class="none" id='b2'></td>
        <td class="none" id='b3'></td>
        <td class="none" id='b4'></td>
        <td class="none" id='b5'></td>
        <td class="none" id='b6'></td>
        <td class="none" id='b7'></td>
        <td class="none" id='b8'></td>
      </tr>
      <tr>
        <td class="none" id='c1'></td>
        <td class="none" id='c2'></td>
        <td class="none" id='c3'></td>
        <td class="none" id='c4'></td>
        <td class="none" id='c5'></td>
        <td class="none" id='c6'></td>
        <td class="none" id='c7'></td>
        <td class="none" id='c8'></td>
      </tr>
      <tr>
        <td class="none" id='d1'></td>
        <td class="none" id='d2'></td>
        <td class="none" id='d3'></td>
        <td class="user1" id='d4'></td>
        <td class="user2" id='d5'></td>
        <td class="none" id='d6'></td>
        <td class="none" id='d7'></td>
        <td class="none" id='d8'></td>
      </tr>
      <tr>
        <td class="none" id='e1'></td>
        <td class="none" id='e2'></td>
        <td class="none" id='e3'></td>
        <td class="user2" id='e4'></td>
        <td class="user1" id='e5'></td>
        <td class="none" id='e6'></td>
        <td class="none" id='e7'></td>
        <td class="none" id='e8'></td>
      </tr>
      <tr>
        <td class="none" id='f1'></td>
        <td class="none" id='f2'></td>
        <td class="none" id='f3'></td>
        <td class="none" id='f4'></td>
        <td class="none" id='f5'></td>
        <td class="none" id='f6'></td>
        <td class="none" id='f7'></td>
        <td class="none" id='f8'></td>
      </tr>
      <tr>
        <td class="none" id='g1'></td>
        <td class="none" id='g2'></td>
        <td class="none" id='g3'></td>
        <td class="none" id='g4'></td>
        <td class="none" id='g5'></td>
        <td class="none" id='g6'></td>
        <td class="none" id='g7'></td>
        <td class="none" id='g8'></td>
      </tr>
      <tr>
        <td class="none" id='h1'></td>
        <td class="none" id='h2'></td>
        <td class="none" id='h3'></td>
        <td class="none" id='h4'></td>
        <td class="none" id='h5'></td>
        <td class="none" id='h6'></td>
        <td class="none" id='h7'></td>
        <td class="none" id='h8'></td>
      </tr>
    </tbody>
  </table>
  <script>
    var turn = 0
    var user1_data = document.getElementsByClassName("user1")
    //  console.log(cell_data)
    for(i=0; i<user1_data.length;i++){
      document.getElementById(user1_data[i].id).innerHTML = "<h1>●</h1>"
    } 

    var user2_data = document.getElementsByClassName("user2")
    for(i=0; i<user2_data.length;i++){
      document.getElementById(user2_data[i].id).innerHTML = "<h1>○</h1>"
    }

    $("#tbl1 td").bind('click', function(){
        turn = (turn + 1) % 2
        $tag_td = $(this)[0];
        $tag_tr = $(this).parent()[0];
        console.log("%s, %s", $tag_tr.rowIndex, $tag_td.cellIndex);

        var change_tbl = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
        var cell_name = change_tbl[$tag_tr.rowIndex].concat($tag_td.cellIndex+1)
        sharp_cell_name = "#".concat(cell_name)
        $(sharp_cell_name).removeClass('none');
        $(sharp_cell_name).addClass('changed');
        /* $(cell_name).append("<h1>●</h1>") */
        if (turn == 0){
          document.getElementById(cell_name).innerHTML = "<h1>●</h1>"
        }else{
          document.getElementById(cell_name).innerHTML = "<h1>○</h1>"
        }

        var user1_data = document.getElementsByClassName("user1")
        //  console.log(cell_data)
        for(i=0; i<user1_data.length;i++){
          document.getElementById(user1_data[i].id).innerHTML = "<h1>●</h1>"
        } 

        var user2_data = document.getElementsByClassName("user2")
        for(i=0; i<user2_data.length;i++){
          document.getElementById(user2_data[i].id).innerHTML = "<h1>○</h1>"
        }

    });
 </script>
</body>
</html>